
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>rotorse.rotor &#8212; RotorSE 0.1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/nrel.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">RotorSE 0.1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for rotorse.rotor</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># encoding: utf-8</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">rotor.py</span>

<span class="sd">Created by Andrew Ning on 2012-02-28.</span>
<span class="sd">Copyright (c)  NREL. All rights reserved.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># from __future__ import print_function</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">openmdao.api</span> <span class="k">import</span> <span class="n">IndepVarComp</span><span class="p">,</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Group</span><span class="p">,</span> <span class="n">Problem</span><span class="p">,</span> <span class="n">ExecComp</span>
<span class="kn">from</span> <span class="nn">rotor_aeropower</span> <span class="k">import</span> <span class="n">SetupRunVarSpeed</span><span class="p">,</span> <span class="n">CSMDrivetrain</span><span class="p">,</span> <span class="n">RegulatedPowerCurve</span><span class="p">,</span> <span class="n">AEP</span><span class="p">,</span> <span class="n">OutputsAero</span>
<span class="kn">from</span> <span class="nn">rotor_structure</span> <span class="k">import</span> <span class="n">ResizeCompositeSection</span><span class="p">,</span> <span class="n">BladeCurvature</span><span class="p">,</span> <span class="n">CurveFEM</span><span class="p">,</span> <span class="n">DamageLoads</span><span class="p">,</span> <span class="n">TotalLoads</span><span class="p">,</span> <span class="n">TipDeflection</span><span class="p">,</span> \
    <span class="n">BladeDeflection</span><span class="p">,</span> <span class="n">RootMoment</span><span class="p">,</span> <span class="n">MassProperties</span><span class="p">,</span> <span class="n">ExtremeLoads</span><span class="p">,</span> <span class="n">GustETM</span><span class="p">,</span> <span class="n">SetupPCModVarSpeed</span><span class="p">,</span> <span class="n">OutputsStructures</span><span class="p">,</span> \
    <span class="n">PreCompSections</span><span class="p">,</span> <span class="n">RotorWithpBEAM</span><span class="p">,</span> <span class="n">ConstraintsStructures</span>

<span class="kn">from</span> <span class="nn">ccblade.ccblade_component</span> <span class="k">import</span> <span class="n">CCBladeGeometry</span><span class="p">,</span> <span class="n">CCBladePower</span><span class="p">,</span> <span class="n">CCBladeLoads</span>
<span class="kn">from</span> <span class="nn">commonse.distribution</span> <span class="k">import</span> <span class="n">RayleighCDF</span><span class="p">,</span> <span class="n">WeibullWithMeanCDF</span>
<span class="kn">from</span> <span class="nn">commonse.environment</span> <span class="k">import</span> <span class="n">PowerWind</span>
<span class="kn">from</span> <span class="nn">precomp</span> <span class="k">import</span> <span class="n">Profile</span><span class="p">,</span> <span class="n">Orthotropic2DMaterial</span><span class="p">,</span> <span class="n">CompositeSection</span>
<span class="kn">from</span> <span class="nn">rotor_geometry</span> <span class="k">import</span> <span class="n">RotorGeometry</span><span class="p">,</span> <span class="n">NREL5MW</span><span class="p">,</span> <span class="n">DTU10MW</span><span class="p">,</span> <span class="n">NINPUT</span>

<span class="kn">from</span> <span class="nn">rotorse</span> <span class="k">import</span> <span class="n">RPM2RS</span><span class="p">,</span> <span class="n">RS2RPM</span><span class="p">,</span> <span class="n">TURBULENCE_CLASS</span><span class="p">,</span> <span class="n">DRIVETRAIN_TYPE</span>


<div class="viewcode-block" id="RotorSE"><a class="viewcode-back" href="../../documentation.html#rotorse.rotor.RotorSE">[docs]</a><span class="k">class</span> <span class="nc">RotorSE</span><span class="p">(</span><span class="n">Group</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RefBlade</span><span class="p">,</span> <span class="n">npts_coarse_power_curve</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">npts_spline_power_curve</span><span class="o">=</span><span class="mi">200</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">RotorSE</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="sd">&quot;&quot;&quot;rotor model&quot;&quot;&quot;</span>

        <span class="n">NPTS</span> <span class="o">=</span> <span class="n">RefBlade</span><span class="o">.</span><span class="n">npts</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;turbulence_class&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;turbulence_class&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">TURBULENCE_CLASS</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;IEC turbulence class class&#39;</span><span class="p">,</span> <span class="n">pass_by_obj</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;gust_stddev&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;gust_stddev&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pass_by_obj</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="c1">#self.add(&#39;cdf_reference_height_wind_speed&#39;, IndepVarComp(&#39;cdf_reference_height_wind_speed&#39;, val=0.0, units=&#39;m&#39;, desc=&#39;reference hub height for IEC wind speed (used in CDF calculation)&#39;), promotes=[&#39;*&#39;])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;VfactorPC&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;VfactorPC&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;fraction of rated speed at which the deflection is assumed to representative throughout the power curve calculation&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>

        <span class="c1"># --- control ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;c_Vin&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;control_Vin&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;cut-in wind speed&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;c_Vout&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;control_Vout&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;m/s&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;cut-out wind speed&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>  <span class="n">units</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;rated power&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;c_minOmega&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;control_minOmega&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;rpm&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;minimum allowed rotor rotation speed&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;c_maxOmega&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;control_maxOmega&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;rpm&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;maximum allowed rotor rotation speed&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;c_tsr&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;control_tsr&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;tip-speed ratio in Region 2 (should be optimized externally)&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;c_pitch&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;control_pitch&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;pitch angle in region 2 (and region 3 for fixed pitch machines)&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;pitch_extreme&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;pitch_extreme&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;worst-case pitch at survival wind condition&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;azimuth_extreme&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;azimuth_extreme&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;worst-case azimuth at survival wind condition&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>

        <span class="c1"># --- drivetrain efficiency ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;drivetrainType&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;drivetrainType&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">DRIVETRAIN_TYPE</span><span class="p">[</span><span class="s1">&#39;GEARED&#39;</span><span class="p">],</span> <span class="n">pass_by_obj</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>


        <span class="c1"># --- fatigue ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;rstar_damage&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;rstar_damage&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">NPTS</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;nondimensional radial locations of damage equivalent moments&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Mxb_damage&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;Mxb_damage&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">NPTS</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;N*m&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;damage equivalent moments about blade c.s. x-direction&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;Myb_damage&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;Myb_damage&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">NPTS</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;N*m&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;damage equivalent moments about blade c.s. y-direction&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;strain_ult_spar&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;strain_ult_spar&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;ultimate strain in spar cap&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;strain_ult_te&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;strain_ult_te&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mi">2500</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;uptimate strain in trailing-edge panels&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;m_damage&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;m_damage&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;slope of S-N curve for fatigue analysis&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="c1">#self.add(&#39;lifetime&#39;, IndepVarComp(&#39;lifetime&#39;, val=20.0, units=&#39;year&#39;, desc=&#39;project lifetime for fatigue analysis&#39;), promotes=[&#39;*&#39;])</span>


        <span class="c1"># --- options ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;nSector&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;nSector&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;number of sectors to divide rotor face into in computing thrust and power&#39;</span><span class="p">,</span> <span class="n">pass_by_obj</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;tiploss&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;tiploss&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">pass_by_obj</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;hubloss&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;hubloss&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">pass_by_obj</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;wakerotation&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;wakerotation&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">pass_by_obj</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;usecd&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;usecd&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">pass_by_obj</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;AEP_loss_factor&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;AEP_loss_factor&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;availability and other losses (soiling, array, etc.)&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;dynamic_amplication_tip_deflection&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;dynamic_amplication_tip_deflection&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s1">&#39;a dynamic amplification factor to adjust the static deflection calculation&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;shape_parameter&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;shape_parameter&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        
        <span class="c1"># --- Rotor Aero &amp; Power ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;rotorGeometry&#39;</span><span class="p">,</span> <span class="n">RotorGeometry</span><span class="p">(</span><span class="n">RefBlade</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>

        <span class="c1"># self.add(&#39;tipspeed&#39;, MaxTipSpeed())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;setup&#39;</span><span class="p">,</span> <span class="n">SetupRunVarSpeed</span><span class="p">(</span><span class="n">npts_coarse_power_curve</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;analysis&#39;</span><span class="p">,</span> <span class="n">CCBladePower</span><span class="p">(</span><span class="n">NPTS</span><span class="p">,</span> <span class="n">npts_coarse_power_curve</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="n">CSMDrivetrain</span><span class="p">(</span><span class="n">npts_coarse_power_curve</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;powercurve&#39;</span><span class="p">,</span> <span class="n">RegulatedPowerCurve</span><span class="p">(</span><span class="n">npts_coarse_power_curve</span><span class="p">,</span> <span class="n">npts_spline_power_curve</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;wind&#39;</span><span class="p">,</span> <span class="n">PowerWind</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="c1"># self.add(&#39;cdf&#39;, WeibullWithMeanCDF(npts_spline_power_curve))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;cdf&#39;</span><span class="p">,</span> <span class="n">RayleighCDF</span><span class="p">(</span><span class="n">npts_spline_power_curve</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;aep&#39;</span><span class="p">,</span> <span class="n">AEP</span><span class="p">(</span><span class="n">npts_spline_power_curve</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;outputs_aero&#39;</span><span class="p">,</span> <span class="n">OutputsAero</span><span class="p">(</span><span class="n">npts_spline_power_curve</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>


        <span class="c1"># --- add structures ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;curvature&#39;</span><span class="p">,</span> <span class="n">BladeCurvature</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="n">ResizeCompositeSection</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;gust&#39;</span><span class="p">,</span> <span class="n">GustETM</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;setuppc&#39;</span><span class="p">,</span>  <span class="n">SetupPCModVarSpeed</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;beam&#39;</span><span class="p">,</span> <span class="n">PreCompSections</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;aero_rated&#39;</span><span class="p">,</span> <span class="n">CCBladeLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;aero_extrm&#39;</span><span class="p">,</span> <span class="n">CCBladeLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">,</span>  <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;aero_extrm_forces&#39;</span><span class="p">,</span> <span class="n">CCBladePower</span><span class="p">(</span><span class="n">NPTS</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve&#39;</span><span class="p">,</span> <span class="n">CCBladeLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">,</span>  <span class="mi">1</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;loads_defl&#39;</span><span class="p">,</span> <span class="n">TotalLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;loads_pc_defl&#39;</span><span class="p">,</span> <span class="n">TotalLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;loads_strain&#39;</span><span class="p">,</span> <span class="n">TotalLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;damage&#39;</span><span class="p">,</span> <span class="n">DamageLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;struc&#39;</span><span class="p">,</span> <span class="n">RotorWithpBEAM</span><span class="p">(</span><span class="n">NPTS</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gamma_fatigue&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;curvefem&#39;</span><span class="p">,</span> <span class="n">CurveFEM</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="n">TipDeflection</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;root_moment&#39;</span><span class="p">,</span> <span class="n">RootMoment</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;mass&#39;</span><span class="p">,</span> <span class="n">MassProperties</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;extreme&#39;</span><span class="p">,</span> <span class="n">ExtremeLoads</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;blade_defl&#39;</span><span class="p">,</span> <span class="n">BladeDeflection</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;aero_0&#39;</span><span class="p">,</span> <span class="n">CCBladeLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">,</span>  <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;aero_120&#39;</span><span class="p">,</span> <span class="n">CCBladeLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">,</span>  <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;aero_240&#39;</span><span class="p">,</span> <span class="n">CCBladeLoads</span><span class="p">(</span><span class="n">NPTS</span><span class="p">,</span>  <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;root_moment_0&#39;</span><span class="p">,</span> <span class="n">RootMoment</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;root_moment_120&#39;</span><span class="p">,</span> <span class="n">RootMoment</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;root_moment_240&#39;</span><span class="p">,</span> <span class="n">RootMoment</span><span class="p">(</span><span class="n">NPTS</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;output_struc&#39;</span><span class="p">,</span> <span class="n">OutputsStructures</span><span class="p">(</span><span class="n">NPTS</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;constraints&#39;</span><span class="p">,</span> <span class="n">ConstraintsStructures</span><span class="p">(</span><span class="n">NPTS</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>

        <span class="c1"># # connectiosn to tipspeed</span>
        <span class="c1"># self.connect(&#39;geom.R&#39;, &#39;tipspeed.R&#39;)</span>
        <span class="c1"># self.connect(&#39;max_tip_speed&#39;, &#39;tipspeed.Vtip_max&#39;)</span>
        <span class="c1"># self.connect(&#39;tipspeed.Omega_max&#39;, &#39;control_maxOmega&#39;)</span>

        <span class="c1"># connections to setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_Vin&#39;</span><span class="p">,</span> <span class="s1">&#39;setup.control_Vin&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_Vout&#39;</span><span class="p">,</span> <span class="s1">&#39;setup.control_Vout&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_maxOmega&#39;</span><span class="p">,</span> <span class="s1">&#39;setup.control_maxOmega&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;setup.control_pitch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_tsr&#39;</span><span class="p">,</span> <span class="s1">&#39;setup.control_tsr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;geom.R&#39;</span><span class="p">,</span> <span class="s1">&#39;setup.R&#39;</span><span class="p">)</span>

        <span class="c1"># connections to analysis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.chord&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.precurve&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve_tip&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.precurveTip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rhub&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.Rhub&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rtip&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.Rtip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precone&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.precone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;yaw&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.yaw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;airfoils&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.airfoils&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nBlades&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.B&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nSector&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.nSector&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;setup.Uhub&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.Uhub&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;setup.Omega&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.Omega&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;setup.pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis.pitch&#39;</span><span class="p">)</span>

        <span class="c1"># Connections from external modules</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;hub_height&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;analysis.hubHt&#39;</span><span class="p">,</span><span class="s1">&#39;aero_0.hubHt&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.hubHt&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.hubHt&#39;</span><span class="p">,</span><span class="s1">&#39;aero_defl_powercurve.hubHt&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm_forces.hubHt&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm.hubHt&#39;</span><span class="p">,</span><span class="s1">&#39;aero_rated.hubHt&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;analysis.rho&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.rho&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.rho&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.rho&#39;</span><span class="p">,</span><span class="s1">&#39;aero_defl_powercurve.rho&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm_forces.rho&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm.rho&#39;</span><span class="p">,</span><span class="s1">&#39;aero_rated.rho&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;analysis.mu&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.mu&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.mu&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.mu&#39;</span><span class="p">,</span><span class="s1">&#39;aero_defl_powercurve.mu&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm_forces.mu&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm.mu&#39;</span><span class="p">,</span><span class="s1">&#39;aero_rated.mu&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;wind.shearExp&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;analysis.shearExp&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_0.shearExp&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.shearExp&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.shearExp&#39;</span><span class="p">,</span><span class="s1">&#39;aero_defl_powercurve.shearExp&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm_forces.shearExp&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm.shearExp&#39;</span><span class="p">,</span><span class="s1">&#39;aero_rated.shearExp&#39;</span><span class="p">])</span>
        <span class="c1">#self.connect(&#39;analysis.shearExp&#39;, [&#39;aero_0.shearExp&#39;,&#39;aero_120.shearExp&#39;,&#39;aero_240.shearExp&#39;,&#39;aero_defl_powercurve.shearExp&#39;,&#39;aero_extrm_forces.shearExp&#39;,&#39;aero_extrm.shearExp&#39;,&#39;aero_rated.shearExp&#39;])</span>
        
        <span class="c1"># connections to drivetrain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;analysis.P&#39;</span><span class="p">,</span> <span class="s1">&#39;dt.aeroPower&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;analysis.Q&#39;</span><span class="p">,</span> <span class="s1">&#39;dt.aeroTorque&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;analysis.T&#39;</span><span class="p">,</span> <span class="s1">&#39;dt.aeroThrust&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="s1">&#39;dt.ratedPower&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;drivetrainType&#39;</span><span class="p">,</span> <span class="s1">&#39;dt.drivetrainType&#39;</span><span class="p">)</span>

        <span class="c1"># connections to powercurve</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_Vin&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.control_Vin&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_Vout&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.control_Vout&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_maxOmega&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.control_maxOmega&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_minOmega&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.control_minOmega&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.control_pitch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.control_ratedPower&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_tsr&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.control_tsr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;setup.Uhub&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.Vcoarse&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;dt.power&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.Pcoarse&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;analysis.T&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.Tcoarse&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;geom.R&#39;</span><span class="p">,</span> <span class="s1">&#39;powercurve.R&#39;</span><span class="p">)</span>

        <span class="c1"># connections to wind</span>
        <span class="c1"># self.connect(&#39;cdf_reference_mean_wind_speed&#39;, &#39;wind.Uref&#39;)</span>
        <span class="c1">#self.connect(&#39;cdf_reference_height_wind_speed&#39;, &#39;wind.zref&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;wind_zvec&#39;</span><span class="p">,</span> <span class="s1">&#39;wind.z&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;turbineclass.V_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;wind.Uref&#39;</span><span class="p">)</span>

        <span class="c1"># connections to cdf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.V&#39;</span><span class="p">,</span> <span class="s1">&#39;cdf.x&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;wind.U&#39;</span><span class="p">,</span> <span class="s1">&#39;cdf.xbar&#39;</span><span class="p">,</span> <span class="n">src_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;shape_parameter&#39;</span><span class="p">,</span> <span class="s1">&#39;cdf.k&#39;</span><span class="p">)</span>

        <span class="c1"># connections to aep</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;cdf.F&#39;</span><span class="p">,</span> <span class="s1">&#39;aep.CDF_V&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.P&#39;</span><span class="p">,</span> <span class="s1">&#39;aep.P&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;AEP_loss_factor&#39;</span><span class="p">,</span> <span class="s1">&#39;aep.lossFactor&#39;</span><span class="p">)</span>

        <span class="c1"># connections to outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.V&#39;</span><span class="p">,</span> <span class="s1">&#39;V_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.P&#39;</span><span class="p">,</span> <span class="s1">&#39;P_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aep.AEP&#39;</span><span class="p">,</span> <span class="s1">&#39;AEP_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_V&#39;</span><span class="p">,</span> <span class="s1">&#39;rated_V_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_Omega&#39;</span><span class="p">,</span> <span class="s1">&#39;rated_Omega_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;rated_pitch_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_T&#39;</span><span class="p">,</span> <span class="s1">&#39;rated_T_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_Q&#39;</span><span class="p">,</span> <span class="s1">&#39;rated_Q_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;geom.diameter&#39;</span><span class="p">,</span> <span class="s1">&#39;diameter_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;presweep_tip&#39;</span><span class="p">,</span> <span class="s1">&#39;presweepTip_in&#39;</span><span class="p">)</span>

        
        <span class="c1"># Structures connections</span>
        
        
        <span class="c1"># connections to curvature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;curvature.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;curvature.precurve&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;presweep&#39;</span><span class="p">,</span> <span class="s1">&#39;curvature.presweep&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precone&#39;</span><span class="p">,</span> <span class="s1">&#39;curvature.precone&#39;</span><span class="p">)</span>

        <span class="c1"># connections to resize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord&#39;</span><span class="p">,</span> <span class="s1">&#39;resize.chord&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;sparT&#39;</span><span class="p">,</span> <span class="s1">&#39;resize.sparT&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;teT&#39;</span><span class="p">,</span> <span class="s1">&#39;resize.teT&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;upperCS&#39;</span><span class="p">,</span> <span class="s1">&#39;resize.upperCS_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;lowerCS&#39;</span><span class="p">,</span> <span class="s1">&#39;resize.lowerCS_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;websCS&#39;</span><span class="p">,</span> <span class="s1">&#39;resize.websCS_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord_ref&#39;</span><span class="p">,</span> <span class="s1">&#39;resize.chord_ref&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;sector_idx_strain_spar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;resize.sector_idx_strain_spar&#39;</span><span class="p">,</span><span class="s1">&#39;beam.sector_idx_strain_spar&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;sector_idx_strain_te&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;resize.sector_idx_strain_te&#39;</span><span class="p">,</span><span class="s1">&#39;beam.sector_idx_strain_te&#39;</span><span class="p">])</span>

        <span class="c1"># connections to gust</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;turbulence_class&#39;</span><span class="p">,</span> <span class="s1">&#39;gust.turbulence_class&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;turbineclass.V_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;gust.V_mean&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_V&#39;</span><span class="p">,</span> <span class="s1">&#39;gust.V_hub&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;gust_stddev&#39;</span><span class="p">,</span> <span class="s1">&#39;gust.std&#39;</span><span class="p">)</span>

        <span class="c1"># connections to setuppc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;setuppc.control_pitch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;control_tsr&#39;</span><span class="p">,</span> <span class="s1">&#39;setuppc.control_tsr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_V&#39;</span><span class="p">,</span> <span class="s1">&#39;setuppc.Vrated&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;geom.R&#39;</span><span class="p">,</span> <span class="s1">&#39;setuppc.R&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;VfactorPC&#39;</span><span class="p">,</span> <span class="s1">&#39;setuppc.Vfactor&#39;</span><span class="p">)</span>

        <span class="c1"># connections to aero_rated (for max deflection)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.chord&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.precurve&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve_tip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.precurveTip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rhub&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.Rhub&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rtip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.Rtip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precone&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.precone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;yaw&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.yaw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;airfoils&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.airfoils&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nBlades&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.B&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nSector&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.nSector&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;gust.V_gust&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.V_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_Omega&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.Omega_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.pitch_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.azimuth&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_rated.azimuth_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_rated</span><span class="o">.</span><span class="n">azimuth_load</span> <span class="o">=</span> <span class="mf">180.0</span>  <span class="c1"># closest to tower</span>

        <span class="c1"># connections to aero_extrm (for max strain)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.chord&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.precurve&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve_tip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.precurveTip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rhub&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.Rhub&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rtip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.Rtip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precone&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.precone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;yaw&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.yaw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;airfoils&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.airfoils&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nBlades&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.B&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nSector&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.nSector&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;turbineclass.V_extreme&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.V_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;pitch_extreme&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.pitch_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;azimuth_extreme&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm.azimuth_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_extrm</span><span class="o">.</span><span class="n">Omega_load</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># parked case</span>

        <span class="c1"># connections to aero_extrm_forces (for tower thrust)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.chord&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.precurve&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve_tip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.precurveTip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rhub&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.Rhub&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rtip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.Rtip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precone&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.precone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;yaw&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.yaw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;airfoils&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.airfoils&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nBlades&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.B&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nSector&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.nSector&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_extrm_forces</span><span class="o">.</span><span class="n">Uhub</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_extrm_forces</span><span class="o">.</span><span class="n">Omega</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># parked case</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_extrm_forces</span><span class="o">.</span><span class="n">pitch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;turbineclass.V_extreme_full&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_extrm_forces.Uhub&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_extrm_forces</span><span class="o">.</span><span class="n">pitch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">])</span>  <span class="c1"># feathered</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_extrm_forces</span><span class="o">.</span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_extrm_forces</span><span class="o">.</span><span class="n">Q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># connections to aero_defl_powercurve (for gust reversal)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.chord&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.precurve&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve_tip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.precurveTip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rhub&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.Rhub&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rtip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.Rtip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precone&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.precone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;yaw&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.yaw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;airfoils&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.airfoils&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nBlades&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.B&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nSector&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.nSector&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;setuppc.Uhub&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.V_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;setuppc.Omega&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.Omega_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;setuppc.pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.pitch_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;setuppc.azimuth&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_defl_powercurve.azimuth_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aero_defl_powercurve</span><span class="o">.</span><span class="n">azimuth_load</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="c1"># connections to beam</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.chord&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;resize.upperCS&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.upperCS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;resize.lowerCS&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.lowerCS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;resize.websCS&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.websCS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.profile&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;le_location&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.le_location&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;materials&#39;</span><span class="p">,</span> <span class="s1">&#39;beam.materials&#39;</span><span class="p">)</span>

        <span class="c1"># connections to loads_defl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Omega&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.aeroloads_Omega&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Px&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.aeroloads_Px&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Py&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.aeroloads_Py&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Pz&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.aeroloads_Pz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_azimuth&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.aeroloads_azimuth&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.aeroloads_pitch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_r&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.aeroloads_r&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:z&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.totalCone&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.totalCone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.z_az&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.z_az&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:rhoA&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_defl.rhoA&#39;</span><span class="p">)</span>

        <span class="c1"># connections to loads_pc_defl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve.loads_Omega&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.aeroloads_Omega&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve.loads_Px&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.aeroloads_Px&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve.loads_Py&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.aeroloads_Py&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve.loads_Pz&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.aeroloads_Pz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve.loads_azimuth&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.aeroloads_azimuth&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve.loads_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.aeroloads_pitch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve.loads_r&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.aeroloads_r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:z&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.totalCone&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.totalCone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.z_az&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.z_az&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:rhoA&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_pc_defl.rhoA&#39;</span><span class="p">)</span>


        <span class="c1"># connections to loads_strain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm.loads_Omega&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.aeroloads_Omega&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm.loads_Px&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.aeroloads_Px&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm.loads_Py&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.aeroloads_Py&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm.loads_Pz&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.aeroloads_Pz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm.loads_azimuth&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.aeroloads_azimuth&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm.loads_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.aeroloads_pitch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm.loads_r&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.aeroloads_r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:z&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.totalCone&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.totalCone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.z_az&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.z_az&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:rhoA&#39;</span><span class="p">,</span> <span class="s1">&#39;loads_strain.rhoA&#39;</span><span class="p">)</span>


        <span class="c1"># connections to damage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;rstar_damage&#39;</span><span class="p">,</span> <span class="s1">&#39;damage.rstar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Mxb_damage&#39;</span><span class="p">,</span> <span class="s1">&#39;damage.Mxb&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Myb_damage&#39;</span><span class="p">,</span> <span class="s1">&#39;damage.Myb&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;damage.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:z&#39;</span><span class="p">,</span> <span class="s1">&#39;damage.r&#39;</span><span class="p">)</span>


        <span class="c1"># connections to struc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:z&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:z&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:EA&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:EA&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:EIxx&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:EIxx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:EIyy&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:EIyy&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:EIxy&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:EIxy&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:GJ&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:GJ&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:rhoA&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:rhoA&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:rhoJ&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:rhoJ&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:x_ec&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:x_ec&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:y_ec&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.beam:y_ec&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_defl.Px_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Px_defl&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_defl.Py_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Py_defl&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_defl.Pz_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Pz_defl&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_pc_defl.Px_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Px_pc_defl&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_pc_defl.Py_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Py_pc_defl&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_pc_defl.Pz_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Pz_pc_defl&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_strain.Px_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Px_strain&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_strain.Py_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Py_strain&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;loads_strain.Pz_af&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Pz_strain&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.xu_strain_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.xu_strain_spar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.xl_strain_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.xl_strain_spar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.yu_strain_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.yu_strain_spar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.yl_strain_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.yl_strain_spar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.xu_strain_te&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.xu_strain_te&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.xl_strain_te&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.xl_strain_te&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.yu_strain_te&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.yu_strain_te&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.yl_strain_te&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.yl_strain_te&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;damage.Mxa&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.Mx_damage&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;damage.Mya&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.My_damage&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;strain_ult_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.strain_ult_spar&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;strain_ult_te&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.strain_ult_te&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;m_damage&#39;</span><span class="p">,</span> <span class="s1">&#39;struc.m_damage&#39;</span><span class="p">)</span>
        <span class="c1">#self.connect(&#39;lifetime&#39;, &#39;struc.lifetime&#39;)</span>

        <span class="c1"># connections to curvefem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_Omega&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.Omega&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:z&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:z&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:EA&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:EA&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:EIxx&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:EIxx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:EIyy&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:EIyy&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:EIxy&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:EIxy&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:GJ&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:GJ&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:rhoA&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:rhoA&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:rhoJ&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:rhoJ&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:x_ec&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:x_ec&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.beam:y_ec&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.beam:y_ec&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.precurve&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;presweep&#39;</span><span class="p">,</span> <span class="s1">&#39;curvefem.presweep&#39;</span><span class="p">)</span>

        <span class="c1"># connections to tip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.dx_defl&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.dx&#39;</span><span class="p">,</span> <span class="n">src_indices</span><span class="o">=</span><span class="p">[</span><span class="n">NPTS</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.dy_defl&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.dy&#39;</span><span class="p">,</span> <span class="n">src_indices</span><span class="o">=</span><span class="p">[</span><span class="n">NPTS</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.dz_defl&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.dz&#39;</span><span class="p">,</span> <span class="n">src_indices</span><span class="o">=</span><span class="p">[</span><span class="n">NPTS</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.theta&#39;</span><span class="p">,</span> <span class="n">src_indices</span><span class="o">=</span><span class="p">[</span><span class="n">NPTS</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.pitch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_azimuth&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.azimuth&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.tilt&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.totalCone&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.totalConeTip&#39;</span><span class="p">,</span> <span class="n">src_indices</span><span class="o">=</span><span class="p">[</span><span class="n">NPTS</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;dynamic_amplication_tip_deflection&#39;</span><span class="p">,</span> <span class="s1">&#39;tip.dynamicFactor&#39;</span><span class="p">)</span>

        <span class="c1"># connections to root moment</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.r_pts&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Px&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.aeroloads_Px&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Py&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.aeroloads_Py&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Pz&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.aeroloads_Pz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_r&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.aeroloads_r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.totalCone&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.totalCone&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.x_az&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.x_az&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.y_az&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.y_az&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.z_az&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.z_az&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.s&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment.s&#39;</span><span class="p">)</span>

        <span class="c1"># connections to mass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.blade_mass&#39;</span><span class="p">,</span> <span class="s1">&#39;mass.blade_mass&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.blade_moment_of_inertia&#39;</span><span class="p">,</span> <span class="s1">&#39;mass.blade_moment_of_inertia&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nBlades&#39;</span><span class="p">,</span> <span class="s1">&#39;mass.nBlades&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;mass.tilt&#39;</span><span class="p">)</span>

        <span class="c1"># connectsion to extreme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm_forces.T&#39;</span><span class="p">,</span> <span class="s1">&#39;extreme.T&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_extrm_forces.Q&#39;</span><span class="p">,</span> <span class="s1">&#39;extreme.Q&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nBlades&#39;</span><span class="p">,</span> <span class="s1">&#39;extreme.nBlades&#39;</span><span class="p">)</span>

        <span class="c1"># connections to blade_defl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.dx_pc_defl&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.dx&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.dy_pc_defl&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.dy&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.dz_pc_defl&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.dz&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_defl_powercurve.loads_pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.pitch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.theta&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_in&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.r_in0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rhub&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.Rhub0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.r_pts0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.precurve0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;bladeLength&#39;</span><span class="p">,</span> <span class="s1">&#39;blade_defl.bladeLength0&#39;</span><span class="p">)</span>
        <span class="c1"># self.connect(&#39;precurve_sub&#39;, &#39;blade_defl.precurve_sub0&#39;)</span>

        <span class="c1"># connect to outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;turbineclass.V_extreme&#39;</span><span class="p">,</span> <span class="s1">&#39;V_extreme_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;extreme.T_extreme&#39;</span><span class="p">,</span> <span class="s1">&#39;T_extreme_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;extreme.Q_extreme&#39;</span><span class="p">,</span> <span class="s1">&#39;Q_extreme_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.blade_mass&#39;</span><span class="p">,</span> <span class="s1">&#39;mass_one_blade_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;mass.mass_all_blades&#39;</span><span class="p">,</span> <span class="s1">&#39;mass_all_blades_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;mass.I_all_blades&#39;</span><span class="p">,</span> <span class="s1">&#39;I_all_blades_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.freq&#39;</span><span class="p">,</span> <span class="s1">&#39;freq_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvefem.freq&#39;</span><span class="p">,</span> <span class="s1">&#39;freq_curvefem_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tip.tip_deflection&#39;</span><span class="p">,</span> <span class="s1">&#39;tip_deflection_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.strainU_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;strainU_spar_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.strainL_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;strainL_spar_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.strainU_te&#39;</span><span class="p">,</span> <span class="s1">&#39;strainU_te_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.strainL_te&#39;</span><span class="p">,</span> <span class="s1">&#39;strainL_te_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;root_moment.root_bending_moment&#39;</span><span class="p">,</span> <span class="s1">&#39;root_bending_moment_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.eps_crit_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;eps_crit_spar_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;beam.eps_crit_te&#39;</span><span class="p">,</span> <span class="s1">&#39;eps_crit_te_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.damageU_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;damageU_spar_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.damageL_spar&#39;</span><span class="p">,</span> <span class="s1">&#39;damageL_spar_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.damageU_te&#39;</span><span class="p">,</span> <span class="s1">&#39;damageU_te_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;struc.damageL_te&#39;</span><span class="p">,</span> <span class="s1">&#39;damageL_te_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;blade_defl.delta_bladeLength&#39;</span><span class="p">,</span> <span class="s1">&#39;delta_bladeLength_out_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;blade_defl.delta_precurve_sub&#39;</span><span class="p">,</span> <span class="s1">&#39;delta_precurve_sub_out_in&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve_tip&#39;</span><span class="p">,</span> <span class="s1">&#39;precurveTip_in&#39;</span><span class="p">)</span>

        <span class="c1">### adding for the drivetrain root moment calculations:</span>
        <span class="c1"># TODO - number and value of azimuth angles should be arbitrary user inputs</span>
        <span class="c1"># connections to aero_0 (for rated loads at 0 azimuth angle)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;pitch_load89&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;pitch_load89&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">89.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;azimuth_load0&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;azimuth_load0&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;azimuth_load120&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;azimuth_load120&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">120.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;azimuth_load240&#39;</span><span class="p">,</span> <span class="n">IndepVarComp</span><span class="p">(</span><span class="s1">&#39;azimuth_load240&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">240.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.r&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.r&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.r&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;chord&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.chord&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.chord&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.chord&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.theta&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.theta&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.theta&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.precurve&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.precurve&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precurve_tip&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.precurveTip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.precurveTip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.precurveTip&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rhub&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.Rhub&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.Rhub&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.Rhub&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;Rtip&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.Rtip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.Rtip&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.Rtip&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;precone&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.precone&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.precone&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.precone&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tilt&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.tilt&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.tilt&#39;</span><span class="p">])</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;airfoils&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.airfoils&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.airfoils&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.airfoils&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;yaw&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.yaw&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.yaw&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.yaw&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nBlades&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.B&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.B&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.B&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;nSector&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.nSector&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.nSector&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.nSector&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;gust.V_gust&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.V_load&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.V_load&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.V_load&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;powercurve.rated_Omega&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.Omega_load&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.Omega_load&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.Omega_load&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;pitch_load89&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;aero_0.pitch_load&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.pitch_load&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.pitch_load&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;azimuth_load0&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_0.azimuth_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;azimuth_load120&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_120.azimuth_load&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;azimuth_load240&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_240.azimuth_load&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;tiploss&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;analysis.tiploss&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_0.tiploss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.tiploss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.tiploss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_defl_powercurve.tiploss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm_forces.tiploss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm.tiploss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_rated.tiploss&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;hubloss&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;analysis.hubloss&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_0.hubloss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.hubloss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.hubloss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_defl_powercurve.hubloss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm_forces.hubloss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm.hubloss&#39;</span><span class="p">,</span><span class="s1">&#39;aero_rated.hubloss&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;wakerotation&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;analysis.wakerotation&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_0.wakerotation&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.wakerotation&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.wakerotation&#39;</span><span class="p">,</span><span class="s1">&#39;aero_defl_powercurve.wakerotation&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm_forces.wakerotation&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm.wakerotation&#39;</span><span class="p">,</span><span class="s1">&#39;aero_rated.wakerotation&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;usecd&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;analysis.usecd&#39;</span><span class="p">,</span> <span class="s1">&#39;aero_0.usecd&#39;</span><span class="p">,</span><span class="s1">&#39;aero_120.usecd&#39;</span><span class="p">,</span><span class="s1">&#39;aero_240.usecd&#39;</span><span class="p">,</span><span class="s1">&#39;aero_defl_powercurve.usecd&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm_forces.usecd&#39;</span><span class="p">,</span><span class="s1">&#39;aero_extrm.usecd&#39;</span><span class="p">,</span><span class="s1">&#39;aero_rated.usecd&#39;</span><span class="p">])</span>

        <span class="c1"># connections to root moment for drivetrain</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;r_pts&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_120.r_pts&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_240.r_pts&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Px&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.aeroloads_Px&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_120.aeroloads_Px&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_240.aeroloads_Px&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Py&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.aeroloads_Py&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_120.aeroloads_Py&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_240.aeroloads_Py&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_Pz&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.aeroloads_Pz&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_120.aeroloads_Pz&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_240.aeroloads_Pz&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.loads_r&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.aeroloads_r&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_120.aeroloads_r&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_240.aeroloads_r&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.totalCone&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.totalCone&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_120.totalCone&#39;</span><span class="p">,</span> <span class="s1">&#39;root_moment_240.totalCone&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.x_az&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.x_az&#39;</span><span class="p">,</span><span class="s1">&#39;root_moment_120.x_az&#39;</span><span class="p">,</span><span class="s1">&#39;root_moment_240.x_az&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.y_az&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.y_az&#39;</span><span class="p">,</span><span class="s1">&#39;root_moment_120.y_az&#39;</span><span class="p">,</span><span class="s1">&#39;root_moment_240.y_az&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.z_az&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.z_az&#39;</span><span class="p">,</span><span class="s1">&#39;root_moment_120.z_az&#39;</span><span class="p">,</span><span class="s1">&#39;root_moment_240.z_az&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.s&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;root_moment_0.s&#39;</span><span class="p">,</span><span class="s1">&#39;root_moment_120.s&#39;</span><span class="p">,</span><span class="s1">&#39;root_moment_240.s&#39;</span><span class="p">])</span>

        <span class="c1"># connections to root Mxyz outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;root_moment_0.Mxyz&#39;</span><span class="p">,</span><span class="s1">&#39;Mxyz_1_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;root_moment_120.Mxyz&#39;</span><span class="p">,</span><span class="s1">&#39;Mxyz_2_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;root_moment_240.Mxyz&#39;</span><span class="p">,</span><span class="s1">&#39;Mxyz_3_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;curvature.totalCone&#39;</span><span class="p">,</span><span class="s1">&#39;TotalCone_in&#39;</span><span class="p">,</span> <span class="n">src_indices</span><span class="o">=</span><span class="p">[</span><span class="n">NPTS</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_0.pitch_load&#39;</span><span class="p">,</span><span class="s1">&#39;Pitch_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;root_moment_0.Fxyz&#39;</span><span class="p">,</span> <span class="s1">&#39;Fxyz_1_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;root_moment_120.Fxyz&#39;</span><span class="p">,</span> <span class="s1">&#39;Fxyz_2_in&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;root_moment_240.Fxyz&#39;</span><span class="p">,</span> <span class="s1">&#39;Fxyz_3_in&#39;</span><span class="p">)</span>
        <span class="c1">#azimuths not passed. assumed 0,120,240 in drivese function</span>

        <span class="c1"># Connections to constraints not accounted for by promotes=*</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;aero_rated.Omega_load&#39;</span><span class="p">,</span> <span class="s1">&#39;Omega&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;obj_cmp&#39;</span><span class="p">,</span> <span class="n">ExecComp</span><span class="p">(</span><span class="s1">&#39;obj = -AEP&#39;</span><span class="p">,</span> <span class="n">AEP</span><span class="o">=</span><span class="mf">1000000.0</span><span class="p">),</span> <span class="n">promotes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">])</span></div>



        
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># myref = NREL5MW() </span>
    <span class="n">myref</span> <span class="o">=</span> <span class="n">DTU10MW</span><span class="p">()</span>

    <span class="n">rotor</span> <span class="o">=</span> <span class="n">Problem</span><span class="p">()</span>
    <span class="n">npts_coarse_power_curve</span> <span class="o">=</span> <span class="mi">20</span> <span class="c1"># (Int): number of points to evaluate aero analysis at</span>
    <span class="n">npts_spline_power_curve</span> <span class="o">=</span> <span class="mi">200</span>  <span class="c1"># (Int): number of points to use in fitting spline to power curve</span>

    <span class="n">rotor</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">RotorSE</span><span class="p">(</span><span class="n">myref</span><span class="p">,</span> <span class="n">npts_coarse_power_curve</span><span class="p">,</span> <span class="n">npts_spline_power_curve</span><span class="p">)</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>

    <span class="c1"># === blade grid ===</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;hubFraction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">hubFraction</span> <span class="c1">#0.025  # (Float): hub location as fraction of radius</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;bladeLength&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">bladeLength</span> <span class="c1">#61.5  # (Float, m): blade length (if not precurved or swept) otherwise length of blade before curvature</span>
    <span class="c1"># rotor[&#39;delta_bladeLength&#39;] = 0.0  # (Float, m): adjustment to blade length to account for curvature from loading</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;precone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">precone</span> <span class="c1">#2.5  # (Float, deg): precone angle</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;tilt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">tilt</span> <span class="c1">#5.0  # (Float, deg): shaft tilt</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;yaw&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># (Float, deg): yaw error</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;nBlades&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">nBlades</span> <span class="c1">#3  # (Int): number of blades</span>
    <span class="c1"># ------------------</span>
    
    <span class="c1"># === blade geometry ===</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;r_max_chord&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">myref</span><span class="o">.</span><span class="n">r_max_chord</span>  <span class="c1"># 0.23577 #(Float): location of max chord on unit radius</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;chord_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">chord</span> <span class="c1"># np.array([3.2612, 4.3254, 4.5709, 3.7355, 2.69923333, 1.4621])  # (Array, m): chord at control points. defined at hub, then at linearly spaced locations from r_max_chord to tip</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;theta_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">theta</span> <span class="c1"># np.array([0.0, 13.2783, 12.30514836,  6.95106536,  2.72696309, -0.0878099]) # (Array, deg): twist at control points.  defined at linearly spaced locations from r[idx_cylinder] to tip</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;precurve_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">precurve</span> <span class="c1">#np.array([0.0, 0.0, 0.0])  # (Array, m): precurve at control points.  defined at same locations at chord, starting at 2nd control point (root must be zero precurve)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;presweep_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">presweep</span> <span class="c1">#np.array([0.0, 0.0, 0.0])  # (Array, m): precurve at control points.  defined at same locations at chord, starting at 2nd control point (root must be zero precurve)</span>
    <span class="c1"># rotor[&#39;delta_precurve_in&#39;] = np.array([0.0, 0.0, 0.0])  # (Array, m): adjustment to precurve to account for curvature from loading</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;sparT_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">spar_thickness</span> <span class="c1"># np.array([0.0, 0.05, 0.047754, 0.045376, 0.031085, 0.0061398])  # (Array, m): spar cap thickness parameters</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;teT_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">te_thickness</span> <span class="c1"># np.array([0.0, 0.1, 0.09569, 0.06569, 0.02569, 0.00569])  # (Array, m): trailing-edge thickness parameters</span>
    <span class="c1"># ------------------</span>

    <span class="c1"># === atmosphere ===</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;analysis.rho&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.225</span>  <span class="c1"># (Float, kg/m**3): density of air</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;analysis.mu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.81206e-5</span>  <span class="c1"># (Float, kg/m/s): dynamic viscosity of air</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;wind.shearExp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.25</span>  <span class="c1"># (Float): shear exponent</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;hub_height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">hub_height</span> <span class="c1">#90.0  # (Float, m): hub height</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;turbine_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">turbine_class</span> <span class="c1">#TURBINE_CLASS[&#39;I&#39;]  # (Enum): IEC turbine class</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;turbulence_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">TURBULENCE_CLASS</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span>  <span class="c1"># (Enum): IEC turbulence class class</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;wind.zref&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">hub_height</span> <span class="c1">#90.0  # (Float): reference hub height for IEC wind speed (used in CDF calculation)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;gust_stddev&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="c1"># ----------------------</span>

    <span class="c1"># === control ===</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;control_Vin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">control_Vin</span> <span class="c1">#3.0  # (Float, m/s): cut-in wind speed</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;control_Vout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">control_Vout</span> <span class="c1">#25.0  # (Float, m/s): cut-out wind speed</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;control_minOmega&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">control_minOmega</span> <span class="c1">#0.0  # (Float, rpm): minimum allowed rotor rotation speed</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;control_maxOmega&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">control_maxOmega</span> <span class="c1">#12.0  # (Float, rpm): maximum allowed rotor rotation speed</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;control_tsr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">control_tsr</span> <span class="c1">#7.55  # (Float): tip-speed ratio in Region 2 (should be optimized externally)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;control_pitch&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">control_pitch</span> <span class="c1">#0.0  # (Float, deg): pitch angle in region 2 (and region 3 for fixed pitch machines)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;machine_rating&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">rating</span> <span class="c1">#5e6  # (Float, W): rated power</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;pitch_extreme&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># (Float, deg): worst-case pitch at survival wind condition</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;azimuth_extreme&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># (Float, deg): worst-case azimuth at survival wind condition</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;VfactorPC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.7</span>  <span class="c1"># (Float): fraction of rated speed at which the deflection is assumed to representative throughout the power curve calculation</span>
    <span class="c1"># ----------------------</span>

    <span class="c1"># === aero and structural analysis options ===</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;nSector&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># (Int): number of sectors to divide rotor face into in computing thrust and power</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;AEP_loss_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># (Float): availability and other losses (soiling, array, etc.)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;drivetrainType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myref</span><span class="o">.</span><span class="n">drivetrain</span> <span class="c1">#DRIVETRAIN_TYPE[&#39;GEARED&#39;]  # (Enum)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;dynamic_amplication_tip_deflection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.35</span>  <span class="c1"># (Float): a dynamic amplification factor to adjust the static deflection calculation</span>
    <span class="c1"># ----------------------</span>


    <span class="c1"># === fatigue ===</span>
    <span class="n">r_aero</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.02222276</span><span class="p">,</span> <span class="mf">0.06666667</span><span class="p">,</span> <span class="mf">0.11111057</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.23333333</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.36666667</span><span class="p">,</span> <span class="mf">0.43333333</span><span class="p">,</span>
	               <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.56666667</span><span class="p">,</span> <span class="mf">0.63333333</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.83333333</span><span class="p">,</span> <span class="mf">0.88888943</span><span class="p">,</span> <span class="mf">0.93333333</span><span class="p">,</span>
	               <span class="mf">0.97777724</span><span class="p">])</span>  <span class="c1"># (Array): new aerodynamic grid on unit radius</span>
    <span class="n">rstar_damage</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.022</span><span class="p">,</span> <span class="mf">0.067</span><span class="p">,</span> <span class="mf">0.111</span><span class="p">,</span> <span class="mf">0.167</span><span class="p">,</span> <span class="mf">0.233</span><span class="p">,</span> <span class="mf">0.300</span><span class="p">,</span> <span class="mf">0.367</span><span class="p">,</span> <span class="mf">0.433</span><span class="p">,</span> <span class="mf">0.500</span><span class="p">,</span>
        <span class="mf">0.567</span><span class="p">,</span> <span class="mf">0.633</span><span class="p">,</span> <span class="mf">0.700</span><span class="p">,</span> <span class="mf">0.767</span><span class="p">,</span> <span class="mf">0.833</span><span class="p">,</span> <span class="mf">0.889</span><span class="p">,</span> <span class="mf">0.933</span><span class="p">,</span> <span class="mf">0.978</span><span class="p">])</span>  <span class="c1"># (Array): nondimensional radial locations of damage equivalent moments</span>
    <span class="n">Mxb_damage</span> <span class="o">=</span> <span class="mf">1e3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.3743E+003</span><span class="p">,</span> <span class="mf">2.0834E+003</span><span class="p">,</span> <span class="mf">1.8108E+003</span><span class="p">,</span> <span class="mf">1.5705E+003</span><span class="p">,</span> <span class="mf">1.3104E+003</span><span class="p">,</span>
        <span class="mf">1.0488E+003</span><span class="p">,</span> <span class="mf">8.2367E+002</span><span class="p">,</span> <span class="mf">6.3407E+002</span><span class="p">,</span> <span class="mf">4.7727E+002</span><span class="p">,</span> <span class="mf">3.4804E+002</span><span class="p">,</span> <span class="mf">2.4458E+002</span><span class="p">,</span> <span class="mf">1.6339E+002</span><span class="p">,</span>
        <span class="mf">1.0252E+002</span><span class="p">,</span> <span class="mf">5.7842E+001</span><span class="p">,</span> <span class="mf">2.7349E+001</span><span class="p">,</span> <span class="mf">1.1262E+001</span><span class="p">,</span> <span class="mf">3.8549E+000</span><span class="p">,</span> <span class="mf">4.4738E-001</span><span class="p">])</span>  <span class="c1"># (Array, N*m): damage equivalent moments about blade c.s. x-direction</span>
    <span class="n">Myb_damage</span> <span class="o">=</span> <span class="mf">1e3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.7732E+003</span><span class="p">,</span> <span class="mf">2.8155E+003</span><span class="p">,</span> <span class="mf">2.6004E+003</span><span class="p">,</span> <span class="mf">2.3933E+003</span><span class="p">,</span> <span class="mf">2.1371E+003</span><span class="p">,</span>
        <span class="mf">1.8459E+003</span><span class="p">,</span> <span class="mf">1.5582E+003</span><span class="p">,</span> <span class="mf">1.2896E+003</span><span class="p">,</span> <span class="mf">1.0427E+003</span><span class="p">,</span> <span class="mf">8.2015E+002</span><span class="p">,</span> <span class="mf">6.2449E+002</span><span class="p">,</span> <span class="mf">4.5229E+002</span><span class="p">,</span>
        <span class="mf">3.0658E+002</span><span class="p">,</span> <span class="mf">1.8746E+002</span><span class="p">,</span> <span class="mf">9.6475E+001</span><span class="p">,</span> <span class="mf">4.2677E+001</span><span class="p">,</span> <span class="mf">1.5409E+001</span><span class="p">,</span> <span class="mf">1.8426E+000</span><span class="p">])</span>  <span class="c1"># (Array, N*m): damage equivalent moments about blade c.s. y-direction</span>
    <span class="n">xp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">r_aero</span><span class="p">]</span>
    <span class="n">xx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">myref</span><span class="o">.</span><span class="n">r</span><span class="p">]</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;rstar_damage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">xp</span><span class="p">,</span> <span class="n">rstar_damage</span><span class="p">)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;Mxb_damage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">xp</span><span class="p">,</span> <span class="n">Mxb_damage</span><span class="p">)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;Myb_damage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">xp</span><span class="p">,</span> <span class="n">Myb_damage</span><span class="p">)</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;strain_ult_spar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0e-2</span>  <span class="c1"># (Float): ultimate strain in spar cap</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;strain_ult_te&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2500</span><span class="o">*</span><span class="mf">1e-6</span> <span class="o">*</span> <span class="mi">2</span>   <span class="c1"># (Float): uptimate strain in trailing-edge panels, note that I am putting a factor of two for the damage part only.</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;gamma_fatigue&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.755</span> <span class="c1"># (Float): safety factor for fatigue</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;gamma_f&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.35</span> <span class="c1"># (Float): safety factor for loads/stresses</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;gamma_m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.1</span> <span class="c1"># (Float): safety factor for materials</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;gamma_freq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.1</span> <span class="c1"># (Float): safety factor for resonant frequencies</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;m_damage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>  <span class="c1"># (Float): slope of S-N curve for fatigue analysis</span>
    <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;struc.lifetime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">20.0</span>  <span class="c1"># (Float): number of cycles used in fatigue analysis  TODO: make function of rotation speed</span>
    <span class="c1"># ----------------</span>

    <span class="c1"># from myutilities import plt</span>

    <span class="c1"># === run and outputs ===</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="nb">print</span> <span class="s1">&#39;AEP =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;AEP&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;diameter =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;diameter&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;ratedConditions.V =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;rated_V&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;ratedConditions.Omega =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;rated_Omega&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;ratedConditions.pitch =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;rated_pitch&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;ratedConditions.T =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;rated_T&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;ratedConditions.Q =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;rated_Q&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;mass_one_blade =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;mass_one_blade&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;mass_all_blades =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;mass_all_blades&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;I_all_blades =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;I_all_blades&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;freq =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;freq&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;tip_deflection =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;tip_deflection&#39;</span><span class="p">]</span>
    <span class="nb">print</span> <span class="s1">&#39;root_bending_moment =&#39;</span><span class="p">,</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;root_bending_moment&#39;</span><span class="p">]</span>
    <span class="c1">#for io in rotor.root.unknowns:</span>
    <span class="c1">#    print(io + &#39; &#39; + str(rotor.root.unknowns[io]))</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    print &#39;Pn_margin&#39;, rotor[ &#39;Pn_margin&#39;]</span>
<span class="sd">    print &#39;P1_margin&#39;, rotor[ &#39;P1_margin&#39;]</span>
<span class="sd">    print &#39;Pn_margin_cfem&#39;, rotor[ &#39;Pn_margin_cfem&#39;]</span>
<span class="sd">    print &#39;P1_margin_cfem&#39;, rotor[ &#39;P1_margin_cfem&#39;]</span>
<span class="sd">    print &#39;rotor_strain_sparU&#39;, rotor[ &#39;rotor_strain_sparU&#39;]</span>
<span class="sd">    print &#39;rotor_strain_sparL&#39;, rotor[ &#39;rotor_strain_sparL&#39;]</span>
<span class="sd">    print &#39;rotor_strain_teU&#39;, rotor[ &#39;rotor_strain_teU&#39;]</span>
<span class="sd">    print &#39;rotor_strain_teL&#39;, rotor[ &#39;rotor_strain_teL&#39;]</span>
<span class="sd">    print &#39;eps_crit_spar&#39;, rotor[&#39;eps_crit_spar&#39;]</span>
<span class="sd">    print &#39;strain_ult_spar&#39;, rotor[&#39;strain_ult_spar&#39;]</span>
<span class="sd">    print &#39;eps_crit_te&#39;, rotor[&#39;eps_crit_te&#39;]</span>
<span class="sd">    print &#39;strain_ult_te&#39;, rotor[&#39;strain_ult_te&#39;]</span>
<span class="sd">    print &#39;rotor_buckling_sparU&#39;, rotor[ &#39;rotor_buckling_sparU&#39;]</span>
<span class="sd">    print &#39;rotor_buckling_sparL&#39;, rotor[ &#39;rotor_buckling_sparL&#39;]</span>
<span class="sd">    print &#39;rotor_buckling_teU&#39;, rotor[ &#39;rotor_buckling_teU&#39;]</span>
<span class="sd">    print &#39;rotor_buckling_teL&#39;, rotor[ &#39;rotor_buckling_teL&#39;]</span>
<span class="sd">    print &#39;rotor_damage_sparU&#39;, rotor[ &#39;rotor_damage_sparU&#39;]</span>
<span class="sd">    print &#39;rotor_damage_sparL&#39;, rotor[ &#39;rotor_damage_sparL&#39;]</span>
<span class="sd">    print &#39;rotor_damage_teU&#39;, rotor[ &#39;rotor_damage_teU&#39;]</span>
<span class="sd">    print &#39;rotor_damage_teL&#39;, rotor[ &#39;rotor_damage_teL&#39;]</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;V&#39;</span><span class="p">],</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;P&#39;</span><span class="p">]</span><span class="o">/</span><span class="mf">1e6</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;wind speed (m/s)&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;power (W)&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;r_pts&#39;</span><span class="p">],</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;strainU_spar&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;suction&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;r_pts&#39;</span><span class="p">],</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;strainL_spar&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;pressure&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;r_pts&#39;</span><span class="p">],</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;eps_crit_spar&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;critical&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">5e-3</span><span class="p">,</span> <span class="mf">5e-3</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;strain&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="c1"># plt.savefig(&#39;/Users/sning/Desktop/strain_spar.pdf&#39;)</span>
    <span class="c1"># plt.savefig(&#39;/Users/sning/Desktop/strain_spar.png&#39;)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;r_pts&#39;</span><span class="p">],</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;strainU_te&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;suction&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;r_pts&#39;</span><span class="p">],</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;strainL_te&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;pressure&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;r_pts&#39;</span><span class="p">],</span> <span class="n">rotor</span><span class="p">[</span><span class="s1">&#39;eps_crit_te&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;critical&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="o">-</span><span class="mf">5e-3</span><span class="p">,</span> <span class="mf">5e-3</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;strain&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="c1"># plt.savefig(&#39;/Users/sning/Desktop/strain_te.pdf&#39;)</span>
    <span class="c1"># plt.savefig(&#39;/Users/sning/Desktop/strain_te.png&#39;)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="c1"># ----------------</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">RotorSE 0.1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, NREL.
      Last updated on Jul 05, 2018.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>